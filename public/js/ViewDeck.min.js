function createDeckView(r,q){const p=document.createElement("div");p.className="col-sm-3 col-xs-6";const o=document.createElement("div");o.className="thumbnail";const n=document.createElement("a");n.setAttribute("href","./DeckDetails.html");const m=document.createElement("img");m.setAttribute("src","../images/yugioh.png"),m.setAttribute("alt","deckImage"),m.setAttribute("style","width:100%");const l=document.createElement("div");l.className="caption";const k=document.createElement("p");k.innerHTML="<b>Player: </b> "+r.email;const j=document.createElement("p");return j.innerHTML="<b>Deck Name: </b>"+r.deckName,n.addEventListener("mouseover",function(){window.localStorage.getItem("deckName")!=r.deckName&&(console.log(r.deckName),window.localStorage.setItem("deckName",r.deckName),localStorage.setItem("viewDeckID",q));var a=!1;firebase.auth().currentUser&&(a=r.user==firebase.auth().currentUser.uid),console.log(a),window.localStorage.setItem("isUser",a),1!=a&&"true"!=a||(window.localStorage.setItem("deckID",q),console.log(q))}),l.appendChild(k),l.appendChild(j),n.appendChild(m),n.appendChild(l),o.appendChild(n),p.appendChild(o),p}function uid(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}function prepForDetails(d,c){}var config={apiKey:"AIzaSyAhFzSCuiSRmc7VuRehBgtJqvHCow643Gc",authDomain:"yugiohdex-74469.firebaseapp.com",databaseURL:"https://yugiohdex-74469.firebaseio.com",storageBucket:"yugiohdex-74469.appspot.com",messagingSenderId:"928690224323"};firebase.initializeApp(config);const dbDecksRef=firebase.database().ref().child("decks"),topDecskRow=document.getElementById("topDecksRow"),userDecksRow=document.getElementById("userDecks");dbDecksRef.limitToFirst(5).on("child_added",function(e,d){const f=e.val();return firebase.auth().currentUser?void (f.user!=firebase.auth().currentUser.uid?topDecskRow.appendChild(createDeckView(f,e.key)):userDecksRow.appendChild(createDeckView(f,e.key))):void topDecskRow.appendChild(createDeckView(f),e.key)});const deckNameInput=document.getElementById("searchDeck"),deckSave=document.getElementById("deckSearchButton");deckSave.addEventListener("click",function(){for(;topDecskRow.firstChild;){topDecskRow.removeChild(topDecskRow.firstChild)}dbDecksRef.limitToFirst(5).once("value",function(d){var c;d.forEach(function(b){c=b.val(),c.deckName.toLowerCase().includes(deckNameInput.value.toLowerCase())&&topDecskRow.appendChild(createDeckView(c,b.key))})})}),deckNameInput.addEventListener("keyup",function(b){13==b.keyCode&&deckSave.dispatchEvent(new Event("click"))});const commentsList=document.getElementById("commentList"),commentsRef=firebase.database().ref().child("/public_comments/");commentsRef.on("child_added",function(i){var h=i.val();const n=document.createElement("li");n.className="list-group-item";const m=document.createElement("blockquote");m.innerHTML=h.content;const l=document.createElement("cite");l.innerHTML=h.email;const k=document.createElement("p");k.innerHTML=h.date,n.setAttribute("email",h.email),n.appendChild(m),n.appendChild(l),n.appendChild(k);const j=document.createElement("input");j.setAttribute("type","button"),j.setAttribute("class","btn btn-danger"),j.setAttribute("value","delete"),j.addEventListener("click",function(){var a={},d=i.key+"";console.log("Delete Key: "+d),a["/public_comments/"+d]=null,firebase.database().ref().update(a)}),n.appendChild(j),commentsList.appendChild(n)}),commentsRef.on("child_removed",function(e){console.log("Removing from commentsList");for(var d=e.val().email,f=0;f<commentsList.childNodes.length;f++){"li"==commentsList.childNodes[f].nodeName.toLowerCase()&&commentsList.childNodes[f].getAttribute("email")==d&&commentsList.removeChild(commentsList.childNodes[f])}});const commentBtnVD=document.getElementById("commentBtn");commentBtnVD.addEventListener("click",function(){var t=uid(),s="",r="",q=document.getElementById("comments");null!=firebase.auth().currentUser&&(s=firebase.auth().currentUser.email,r=firebase.auth().currentUser.uid);var p=q.value,o=new Date,n=o.getDate(),m=o.getMonth()+1,l=o.getFullYear();n<10&&(n="0"+n),m<10&&(m="0"+m),o=m+"/"+n+"/"+l;var k={content:p,date:o,email:s,uid:r};commentsRef.child(t).set(k),q.value=""});
