/**
 * Created by kevin on 3/6/17.
 */
var isTCG=!0,isMonster=!0,isMagic=!1;const cardSelect=document.getElementById("card_type");cardSelect.addEventListener("change",function(){var a=document.getElementById("card_name").value,b=document.getElementById("attack_pt").value,c=document.getElementById("defense_pt").value;if("Spell"==cardSelect.value){if(isMagic=!0,isMonster=!1,""!=a||""!=b||""!=c)return;for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);dbCardsRef.once("value",function(a){a.forEach(function(a){const b=a.val();1==b.isMagic&&b.isTCG==isTCG&&displaySearchCardGrid(b)})})}else if("Trap"==cardSelect.value){if(isMagic=!1,isMonster=!1,""!=a||""!=b||""!=c)return;for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);dbCardsRef.once("value",function(a){a.forEach(function(a){const b=a.val();0==b.isMagic&&0==b.isMonster&&b.isTCG==isTCG&&displaySearchCardGrid(b)})})}else{if(isMagic=!1,isMonster=!0,""!=a||""!=b||""!=c)return;for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);dbCardsRef.once("value",function(a){a.forEach(function(a){const b=a.val();1==b.isMonster&&b.isTCG==isTCG&&displaySearchCardGrid(b)})})}});const formatSelect=document.getElementById("card_format");formatSelect.addEventListener("change",function(){var a=document.getElementById("card_name").value,b=document.getElementById("attack_pt").value,c=document.getElementById("defense_pt").value;if("TCG"==formatSelect.value){if(isTCG=!0,""!=a||""!=b||""!=c)return;for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);cardSelect.dispatchEvent(new Event("change"))}else if("OCG"==formatSelect.value){if(isTCG=!1,""!=a||""!=b||""!=c)return;for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);cardSelect.dispatchEvent(new Event("change"))}});const searchButton=document.getElementById("search_btn");searchButton.addEventListener("click",function(){var a=document.getElementById("card_name").value,b=document.getElementById("attack_pt").value,c=document.getElementById("defense_pt").value;dbCardsRef.once("value",function(d){for(;searchRow.firstChild;)searchRow.removeChild(searchRow.firstChild);d.forEach(function(d){var e=d.val();""!=a&&""!=b&&""!=c?e.name.toLowerCase().includes(a.toLowerCase())&&parseInt(e.attack)==b&&parseInt(e.defense)==c&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""!=a&&""!=b&&""==c?e.name.toLowerCase().includes(a.toLowerCase())&&e.attack==b&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""!=a&&""==b&&""!=c?e.name.toLowerCase().includes(a.toLowerCase())&&e.defense==c&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""!=a&&""==b&&""==c?e.name.toLowerCase().includes(a.toLowerCase())&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""==a&&""!=b&&""!=c?e.attack==b&&e.defense==c&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""==a&&""!=b&&""==c?e.attack==b&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e):""==a&&""==b&&""!=c&&e.defense==c&&(isMonster&&1==e.isMonster||!isMonster&&0==e.isMonster)&&(isMagic&&1==e.isMagic||!isMagic&&0==e.isMagic)&&displaySearchCardGrid(e)})})});const cardNameInput=document.getElementById("card_name");cardNameInput.addEventListener("keyup",function(a){13==a.keyCode&&searchButton.dispatchEvent(new Event("click"))});const attackInput=document.getElementById("attack_pt");attackInput.addEventListener("keyup",function(a){13==a.keyCode&&searchButton.dispatchEvent(new Event("click"))});const defenseInput=document.getElementById("defense_pt");defenseInput.addEventListener("keyup",function(a){13==a.keyCode&&searchButton.dispatchEvent(new Event("click"))});